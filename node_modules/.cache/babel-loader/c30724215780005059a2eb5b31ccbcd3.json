{"ast":null,"code":"import { firebaseConfig } from './firebase';\nimport * as firebase from 'firebase/app';\nimport 'firebase/messaging';\nimport Axios from './helper/axios';\nconst initializedFirebaseApp = firebase.initializeApp(firebaseConfig);\nexport const askForPermissioToReceiveNotifications = async () => {\n  try {\n    const messaging = await initializedFirebaseApp.messaging();\n    await messaging.requestPermission();\n    const token = await messaging.getToken();\n    console.log('get token ', token);\n    var sessionToken = sessionStorage.setItem('token_de', token);\n    const {\n      user_id\n    } = JSON.parse(localStorage.getItem('userData'));\n    var requestJSON = {\n      user_id,\n      token_type: \"web\",\n      device_token: token\n    };\n    Axios.post('notification/update_device_token', requestJSON).then(response => {\n      console.log(response.data.message);\n    }).catch(err => {\n      console.log(err.message);\n    });\n    messaging.onMessage(payload => {\n      console.log('Message received hello .', payload);\n      handlingNotification(payload);\n    });\n    return token;\n  } catch (error) {\n    console.error(\"errorerror\", error);\n  }\n};\nexport const handlingNotification = payload => {\n  var notify;\n\n  if (Notification.permission === 'granted') {\n    var bodyData = payload.notification.body;\n    var title = payload.notification.title; //var bodyData = payload.data.body;\n    // var title = payload.data.title;\n    //console.log(title);\n    //console.log(bodyData);\n\n    notify = new Notification(title, {\n      body: bodyData,\n      icon: 'https://rymindr.com/wp-content/uploads/2017/02/whitelogo-2-uai-720x232.png',\n      tag: '12345'\n    });\n\n    notify.onclick = function () {\n      notify.close();\n      window.location.hash = '/home/Upcoming';\n    };\n  }\n};","map":{"version":3,"sources":["/var/www/html/RymindrAppNew/src/push-notification.js"],"names":["firebaseConfig","firebase","Axios","initializedFirebaseApp","initializeApp","askForPermissioToReceiveNotifications","messaging","requestPermission","token","getToken","console","log","sessionToken","sessionStorage","setItem","user_id","JSON","parse","localStorage","getItem","requestJSON","token_type","device_token","post","then","response","data","message","catch","err","onMessage","payload","handlingNotification","error","notify","Notification","permission","bodyData","notification","body","title","icon","tag","onclick","close","window","location","hash"],"mappings":"AAAA,SAASA,cAAT,QAA+B,YAA/B;AACA,OAAO,KAAKC,QAAZ,MAA0B,cAA1B;AACA,OAAO,oBAAP;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AAEA,MAAMC,sBAAsB,GAAGF,QAAQ,CAACG,aAAT,CAAuBJ,cAAvB,CAA/B;AAEA,OAAO,MAAMK,qCAAqC,GAAG,YAAY;AAC/D,MAAI;AACF,UAAMC,SAAS,GAAG,MAAMH,sBAAsB,CAACG,SAAvB,EAAxB;AACA,UAAMA,SAAS,CAACC,iBAAV,EAAN;AACA,UAAMC,KAAK,GAAG,MAAMF,SAAS,CAACG,QAAV,EAApB;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BH,KAA1B;AAEA,QAAII,YAAY,GAAGC,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmCN,KAAnC,CAAnB;AAEA,UAAM;AAAEO,MAAAA;AAAF,QAAcC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAApB;AAEA,QAAIC,WAAW,GAAG;AAChBL,MAAAA,OADgB;AAEhBM,MAAAA,UAAU,EAAE,KAFI;AAGhBC,MAAAA,YAAY,EAAEd;AAHE,KAAlB;AAMAN,IAAAA,KAAK,CAACqB,IAAN,CAAW,kCAAX,EAA+CH,WAA/C,EACGI,IADH,CACSC,QAAD,IAAc;AAChBf,MAAAA,OAAO,CAACC,GAAR,CAAYc,QAAQ,CAACC,IAAT,CAAcC,OAA1B;AACH,KAHH,EAIGC,KAJH,CAIUC,GAAD,IAAS;AACZnB,MAAAA,OAAO,CAACC,GAAR,CAAYkB,GAAG,CAACF,OAAhB;AACH,KANH;AAQArB,IAAAA,SAAS,CAACwB,SAAV,CAAqBC,OAAD,IAAa;AAC/BrB,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCoB,OAAxC;AAEAC,MAAAA,oBAAoB,CAACD,OAAD,CAApB;AACD,KAJD;AAMA,WAAOvB,KAAP;AACD,GAhCD,CAgCE,OAAOyB,KAAP,EAAc;AACdvB,IAAAA,OAAO,CAACuB,KAAR,CAAc,YAAd,EAA4BA,KAA5B;AACD;AACF,CApCM;AAsCP,OAAO,MAAMD,oBAAoB,GAAID,OAAD,IAAa;AAC/C,MAAIG,MAAJ;;AAEA,MAAIC,YAAY,CAACC,UAAb,KAA4B,SAAhC,EAA2C;AACzC,QAAIC,QAAQ,GAAGN,OAAO,CAACO,YAAR,CAAqBC,IAApC;AACA,QAAIC,KAAK,GAAGT,OAAO,CAACO,YAAR,CAAqBE,KAAjC,CAFyC,CAGzC;AACA;AACA;AACA;;AACAN,IAAAA,MAAM,GAAG,IAAIC,YAAJ,CAAiBK,KAAjB,EAAwB;AAC/BD,MAAAA,IAAI,EAAEF,QADyB;AAE/BI,MAAAA,IAAI,EAAE,4EAFyB;AAG/BC,MAAAA,GAAG,EAAE;AAH0B,KAAxB,CAAT;;AAMAR,IAAAA,MAAM,CAACS,OAAP,GAAiB,YAAY;AAC3BT,MAAAA,MAAM,CAACU,KAAP;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,gBAAvB;AACD,KAHD;AAID;AACF,CArBM","sourcesContent":["import { firebaseConfig } from './firebase';\nimport * as firebase from 'firebase/app';\nimport 'firebase/messaging';\nimport Axios from './helper/axios';\n\nconst initializedFirebaseApp = firebase.initializeApp(firebaseConfig);\n\nexport const askForPermissioToReceiveNotifications = async () => {\n  try {\n    const messaging = await initializedFirebaseApp.messaging();\n    await messaging.requestPermission();\n    const token = await messaging.getToken();\n\n    console.log('get token ', token);\n\n    var sessionToken = sessionStorage.setItem('token_de', token);\n\n    const { user_id } = JSON.parse(localStorage.getItem('userData'));\n\n    var requestJSON = {\n      user_id,\n      token_type: \"web\",\n      device_token: token,\n    }\n\n    Axios.post('notification/update_device_token', requestJSON)\n      .then((response) => {\n          console.log(response.data.message);\n      })\n      .catch((err) => {\n          console.log(err.message);\n      });\n\n    messaging.onMessage((payload) => {\n      console.log('Message received hello .', payload);\n\n      handlingNotification(payload);\n    });\n\n    return token;\n  } catch (error) {\n    console.error(\"errorerror\", error);\n  }\n};\n\nexport const handlingNotification = (payload) => {\n  var notify;\n\n  if (Notification.permission === 'granted') {\n    var bodyData = payload.notification.body;\n    var title = payload.notification.title;\n    //var bodyData = payload.data.body;\n    // var title = payload.data.title;\n    //console.log(title);\n    //console.log(bodyData);\n    notify = new Notification(title, {\n      body: bodyData,\n      icon: 'https://rymindr.com/wp-content/uploads/2017/02/whitelogo-2-uai-720x232.png',\n      tag: '12345',\n    });\n\n    notify.onclick = function () {\n      notify.close();\n      window.location.hash = '/home/Upcoming';\n    };\n  }\n};\n"]},"metadata":{},"sourceType":"module"}