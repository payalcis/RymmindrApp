{"ast":null,"code":"var _jsxFileName = \"/var/www/html/RymindrAppNew/src/container/Comments/Comments.js\";\nimport { Message, MoreVert, ThumbUp, Send } from '@material-ui/icons';\nimport { Avatar, Box, Button, IconButton, ListItem, ListItemAvatar, ListItemText, Menu, MenuItem, TextField, Typography, Tooltip } from '@material-ui/core';\nimport Collapse from '@material-ui/core/Collapse';\nimport React, { useEffect, useState } from 'react';\nimport { styled } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withSnackbar } from 'notistack';\nimport { getComments, addComment, commentLike, commentDelete } from '../../store/actions/commentActions';\nimport io from 'socket.io-client';\nconst AvatarStyled = styled(Avatar)({\n  height: 25,\n  width: 25,\n  '& img': {\n    height: 'auto'\n  }\n});\nconst TypoTitleStyled = styled(Typography)(({\n  theme\n}) => ({\n  fontSize: 14,\n  color: theme.palette.secondary.contrastText,\n  marginBottom: 10\n}));\nconst AvatarComntStyled = styled(Avatar)({\n  height: 42,\n  width: 42,\n  marginRight: 20\n});\nconst TextFieldStyled = styled(TextField)({\n  width: 100 + '%',\n  height: 50\n});\nconst EditCommentTextField = styled(TextField)({\n  width: 95 + '%',\n  height: 50\n});\nconst TypoCmntName = styled(Typography)({\n  color: '#757575',\n  fontWeight: 'bold',\n  fontSize: 12,\n  '& span': {\n    fontWeight: 'normal' // marginLeft: 20,\n\n  }\n});\nconst TypoCmntTxt = styled(Typography)({\n  color: '#3d3d3d',\n  fontSize: 14\n});\nconst ButtonStyled = styled(Button)({\n  color: '#757575',\n  fontSize: 12,\n  padding: 0,\n  minWidth: 'auto'\n});\n\nconst Comments = props => {\n  const {\n    type,\n    postId,\n    postUserId,\n    comments,\n    getComments,\n    addComment,\n    commentLike,\n    commentDelete\n  } = props;\n  const addCommentRef = React.useRef();\n  const addReplyRef = React.useRef();\n  const editCommentRef = React.useRef();\n  const aceEditorRef = React.createRef();\n  const {\n    user_id,\n    first_name,\n    last_name,\n    profile_image\n  } = JSON.parse(localStorage.getItem('userData'));\n  const [showComments, setShowComments] = useState([]);\n  const [editCommentId, setEditCommentId] = useState(null);\n  const [editCommentText, setEditCommentText] = useState('');\n  const [commentTxt, setCommentTxt] = useState(null);\n  const [replyTxt, setReplyTxt] = useState(null);\n  const [commentOptions, setCommentOptions] = useState({\n    actions: ['Turn off notifications...']\n  }); // useEffect(() => {\n  //   var pusher = new Pusher('b5678cf7a65e2065a151', {\n  //     cluster: 'eu',\n  //     encrypted: true,\n  //   });\n  //   var channel = pusher.subscribe('comment-add');\n  //   if (postId && postUserId && type) {\n  //     const dataToSend = {\n  //       user_id: user_id,\n  //       post_id: postId,\n  //       post_type: type,\n  //     };\n  //     getComments(dataToSend);\n  //     channel.bind('my-event', (data) => {\n  //       if (data.post_id == postId && data.post_type == type) {\n  //         const dataToSend2 = {\n  //           user_id: user_id,\n  //           post_id: data.post_id,\n  //           post_type: data.post_type,\n  //         };\n  //         getComments(dataToSend2);\n  //       }\n  //     });\n  //   }\n  // }, [postId]);\n\n  useEffect(() => {\n    let mounted = true;\n    var sock = io(\"https://app.rymindr.com:8081\");\n    sock.on('comment-add:App\\\\Events\\\\CommentAdd', function (data) {\n      if (mounted) {\n        console.log('Socket runningngngngngngngngngngngngngngngngngngngngngngng=', data.res);\n        console.log('postId====', postId);\n\n        if (data.res.post_id == postId && data.res.post_type == type) {\n          const dataToSend2 = {\n            user_id: user_id,\n            post_id: data.res.post_id,\n            post_type: data.res.post_type\n          };\n          getComments(dataToSend2);\n        }\n      }\n    });\n    return function cleanup() {\n      mounted = false;\n    };\n  }, [postId]);\n  useEffect(() => {\n    if (postId && postUserId && type) {\n      const dataToSend = {\n        user_id: user_id,\n        post_id: postId,\n        post_type: type\n      };\n      getComments(dataToSend);\n    }\n  }, [postId]);\n\n  const handleClick = (event, parentIndex, childIndex, commentId, commentUserId) => {\n    setAnchorEl(event.currentTarget);\n    var actions = [];\n    var loginUserId = parseInt(user_id);\n    var postOwnerUserId = parseInt(postUserId);\n\n    switch (parseInt(commentUserId)) {\n      case loginUserId:\n        actions = ['Edit...', 'Delete...', 'Turn off notifications...'];\n        break;\n\n      case postOwnerUserId:\n        actions = ['Delete...', 'Turn off notifications...'];\n        break;\n\n      default:\n        actions = ['Turn off notifications...'];\n        break;\n    }\n\n    setCommentOptions({\n      parentIndex,\n      childIndex,\n      commentId,\n      commentUserId,\n      actions\n    });\n  };\n\n  const handleCommentAction = (action, commentDetails) => {\n    setAnchorEl(null);\n\n    switch (action) {\n      case 'Delete...':\n        if (commentDetails.parentIndex !== null) comments[commentDetails.parentIndex]['replies'].splice(commentDetails.childIndex, 1);else comments.splice(commentDetails.childIndex, 1);\n        const dataToSend = {\n          user_id: user_id,\n          id: commentDetails.commentId\n        };\n        commentDelete(dataToSend);\n        break;\n\n      case 'Edit...':\n        setEditCommentId(commentDetails.commentId);\n        console.log('Edit action');\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleAddComment = event => {\n    if (event == 'event') {\n      if (commentTxt !== '') {\n        const dataToSend = {\n          user_id: user_id,\n          post_id: props.postId,\n          post_type: props.type,\n          parent_comment_id: '',\n          content: commentTxt,\n          comment_type: 'text'\n        };\n        addComment(dataToSend);\n        setCommentTxt('');\n        addCommentRef.current.value = '';\n      }\n    } else if (event.key === 'Enter' && event.target.value !== '') {\n      const dataToSend = {\n        user_id: user_id,\n        post_id: props.postId,\n        post_type: props.type,\n        parent_comment_id: '',\n        content: event.target.value,\n        comment_type: 'text'\n      };\n      addComment(dataToSend);\n      event.target.value = '';\n    }\n  };\n\n  const handleDisableComment = event => {\n    if (event.keyCode === 27) {\n      console.log('Esc button pressed');\n      setEditCommentId(null);\n      setEditCommentText('');\n    }\n  };\n\n  const handleEditComment = (event, commentId, parentIndex, childIndex) => {\n    if (event == 'event') {\n      if (editCommentText !== '') {\n        if (parentIndex === null) comments[childIndex].comment = editCommentText;else comments[parentIndex]['replies'][childIndex].reply = editCommentText;\n        const dataToSend = {\n          id: commentId,\n          user_id: user_id,\n          post_id: props.postId,\n          post_type: props.type,\n          parent_comment_id: '',\n          content: editCommentText,\n          comment_type: 'text'\n        };\n        addComment(dataToSend); // event.target.value = \"\";\n\n        setEditCommentId(null);\n        setEditCommentText('');\n        editCommentRef.current.value = '';\n      } else if (editCommentText === '') {\n        setEditCommentText(parentIndex === null ? comments[childIndex].comment : comments[parentIndex]['replies'][childIndex].reply);\n      }\n    } else if (event.key === 'Enter' && event.target.value !== '') {\n      if (event.key === 'Enter' && event.target.value !== '') {\n        if (parentIndex === null) comments[childIndex].comment = event.target.value;else comments[parentIndex]['replies'][childIndex].reply = event.target.value;\n        const dataToSend = {\n          id: commentId,\n          user_id: user_id,\n          post_id: props.postId,\n          post_type: props.type,\n          parent_comment_id: '',\n          content: event.target.value,\n          comment_type: 'text'\n        };\n        addComment(dataToSend);\n        event.target.value = '';\n        setEditCommentId(null);\n        setEditCommentText('');\n      } else if (editCommentText === '') {\n        setEditCommentText(parentIndex === null ? comments[childIndex].comment : comments[parentIndex]['replies'][childIndex].reply);\n      }\n    }\n  };\n\n  const handleAddReply = (event, commentId) => {\n    if (event == 'event') {\n      const dataToSend = {\n        user_id: user_id,\n        post_id: props.postId,\n        post_type: props.type,\n        parent_comment_id: commentId,\n        content: replyTxt,\n        comment_type: 'text'\n      };\n      addComment(dataToSend);\n      setReplyTxt('');\n      addReplyRef.current.value = '';\n    } else if (event.key === 'Enter' && event.target.value !== '') {\n      const dataToSend = {\n        user_id: user_id,\n        post_id: props.postId,\n        post_type: props.type,\n        parent_comment_id: commentId,\n        content: event.target.value,\n        comment_type: 'text'\n      };\n      addComment(dataToSend);\n      event.target.value = '';\n    }\n  };\n\n  const removeElementByValue = (array, element) => {\n    var index = array.indexOf(element);\n    if (index !== -1) array.splice(index, 1);\n    return array;\n  };\n\n  const handleLike = (postId, parentIndex, index, like_icon) => {\n    var temp = comments;\n    var userName = first_name + ' ' + last_name;\n\n    if (parentIndex !== null) {\n      if (like_icon === 'inactive') {\n        temp[parentIndex]['replies'][index].likes++;\n        temp[parentIndex]['replies'][index].like_icon = 'active';\n        temp[parentIndex]['replies'][index].likes_by_user_ids.push(user_id);\n        temp[parentIndex]['replies'][index].likes_by_user_names.push(userName);\n      } else {\n        temp[parentIndex]['replies'][index].likes--;\n        temp[parentIndex]['replies'][index].like_icon = 'inactive';\n        temp[parentIndex]['replies'][index].likes_by_user_ids = removeElementByValue(temp[parentIndex]['replies'][index].likes_by_user_ids, user_id);\n        temp[parentIndex]['replies'][index].likes_by_user_names = removeElementByValue(temp[parentIndex]['replies'][index].likes_by_user_names, userName);\n      }\n\n      console.log(temp[parentIndex]['replies'][index].likes_by_user_names);\n    } else {\n      if (like_icon === 'inactive') {\n        temp[index].likes++;\n        temp[index].like_icon = 'active';\n        temp[index].likes_by_user_ids.push(user_id);\n        temp[index].likes_by_user_names.push(userName);\n      } else {\n        temp[index].likes--;\n        temp[index].like_icon = 'inactive';\n        temp[index].likes_by_user_ids = removeElementByValue(temp[index].likes_by_user_ids, user_id);\n        temp[index].likes_by_user_names = removeElementByValue(temp[index].likes_by_user_names, userName);\n      }\n    }\n\n    setShowComments(new Set(temp));\n    console.log('showComments1234', showComments);\n    const dataToSend = {\n      user_id: user_id,\n      post_id: postId,\n      post_type: 'comment',\n      action: like_icon === 'inactive' ? 'add' : 'remove'\n    };\n    commentLike(dataToSend);\n  };\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n  const [selectedIndex, setSelectedIndex] = React.useState('');\n\n  const handleCollapse = index => {\n    console.warn('selectedIndex === index', selectedIndex === index, selectedIndex, index);\n\n    if (selectedIndex === index) {\n      setSelectedIndex('');\n    } else {\n      setSelectedIndex(index);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(ListItem, {\n    className: \"commentsSection\",\n    alignItems: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ListItemAvatar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AvatarStyled, {\n    alt: \"\",\n    variant: \"square\",\n    src: require('../../assets/images/comment.svg'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(ListItemText, {\n    primary: /*#__PURE__*/React.createElement(TypoTitleStyled, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 11\n      }\n    }, comments.length === 1 ? '1 Comment' : comments.length + ' Comments'),\n    secondary: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      className: \"commentSection\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AvatarComntStyled, {\n      alt: \"\",\n      src: profile_image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(TextFieldStyled, {\n      inputRef: addCommentRef,\n      placeholder: \"Add a comment...\",\n      onChange: event => setCommentTxt(event.target.value),\n      onKeyPress: event => handleAddComment(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"send\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      disabled: commentTxt ? false : true,\n      onClick: event => handleAddComment('event'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Send, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 17\n      }\n    }))), comments.map((comment, parentIndex) => /*#__PURE__*/React.createElement(React.Fragment, null, comment.comment_id === editCommentId ? /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      style: {\n        marginBottom: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(AvatarComntStyled, {\n      alt: \"\",\n      src: comment.comment_user_profile_pic,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      width: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(EditCommentTextField, {\n      inputRef: editCommentRef,\n      defaultValue: comment.comment,\n      onKeyDown: event => handleDisableComment(event),\n      onKeyPress: event => handleEditComment(event, comment.comment_id, null, parentIndex),\n      onChange: event => setEditCommentText(event.target.value) // value={editcommentTxt}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"send\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: () => handleEditComment('event', comment.comment_id, null, parentIndex),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Send, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 25\n      }\n    })))) : /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      style: {\n        marginTop: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(AvatarComntStyled, {\n      alt: \"\",\n      src: comment.comment_user_profile_pic,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(TypoCmntName, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 25\n      }\n    }, comment.comment_user_name, /*#__PURE__*/React.createElement(Box, {\n      component: \"span\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 27\n      }\n    }, \" \", comment.comment_created_at)), /*#__PURE__*/React.createElement(TypoCmntTxt, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 25\n      }\n    }, comment.comment), comment.likes_by_user_ids.length ? /*#__PURE__*/React.createElement(Tooltip, {\n      title: comment.likes_by_user_names.join(', '),\n      arrow: true,\n      placement: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(ButtonStyled, {\n      startIcon: /*#__PURE__*/React.createElement(ThumbUp, {\n        color: comment.like_icon === 'active' ? 'primary' : 'default',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 42\n        }\n      }),\n      onClick: () => handleLike(comment.comment_id, null, parentIndex, comment.like_icon),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 29\n      }\n    }, comment.likes)) : /*#__PURE__*/React.createElement(ButtonStyled, {\n      startIcon: /*#__PURE__*/React.createElement(ThumbUp, {\n        color: comment.like_icon === 'active' ? 'primary' : 'default',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 40\n        }\n      }),\n      onClick: () => handleLike(comment.comment_id, null, parentIndex, comment.like_icon),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 27\n      }\n    }, comment.likes), /*#__PURE__*/React.createElement(ButtonStyled, {\n      onClick: () => {\n        handleCollapse(parentIndex);\n      },\n      startIcon: /*#__PURE__*/React.createElement(Message, {\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 38\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 25\n      }\n    }, comment.replies.length ? comment.replies.length > 1 ? comment.replies.length + ' Replies' : '1 Reply' : 'Reply'))), !props.Hide && /*#__PURE__*/React.createElement(Box, {\n      style: {\n        position: 'relative'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 38\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: event => handleClick(event, null, parentIndex, comment.comment_id, comment.comment_user_id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(MoreVert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 25\n      }\n    })))), /*#__PURE__*/React.createElement(Collapse, {\n      in: parentIndex === selectedIndex,\n      timeout: \"auto\",\n      unmountOnExit: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      style: {\n        marginLeft: 183,\n        marginTop: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(AvatarComntStyled, {\n      alt: \"\",\n      src: profile_image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(TextFieldStyled, {\n      inputRef: addReplyRef,\n      placeholder: \"Add a reply...\",\n      onKeyPress: event => handleAddReply(event, comment.comment_id),\n      onChange: event => setReplyTxt(event.target.value) // value={replyTxt}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"send\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: event => handleAddReply('event', comment.comment_id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Send, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 25\n      }\n    })))), comment.replies.map((reply, index, {\n      length\n    }) => /*#__PURE__*/React.createElement(React.Fragment, null, reply.reply_id === editCommentId ? /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      style: {\n        marginLeft: 130,\n        marginBottom: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(AvatarComntStyled, {\n      alt: \"\",\n      src: profile_image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 27\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      width: 1,\n      display: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(EditCommentTextField, {\n      inputRef: editCommentRef,\n      defaultValue: reply.reply,\n      onKeyDown: event => handleDisableComment(event),\n      onChange: event => setEditCommentText(event.target.value),\n      onKeyPress: event => handleEditComment(event, reply.reply_id, parentIndex, index),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"send\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: () => handleEditComment('event', reply.reply_id, parentIndex, index),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Send, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 31\n      }\n    })))) : /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      className: \"mt-20\",\n      style: {\n        marginLeft: 183\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(AvatarComntStyled, {\n      alt: \"\",\n      src: reply.reply_user_profile_pic,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(TypoCmntName, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 31\n      }\n    }, reply.reply_user_name, /*#__PURE__*/React.createElement(Box, {\n      component: \"span\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 33\n      }\n    }, \" \", reply.reply_created_at)), /*#__PURE__*/React.createElement(TypoCmntTxt, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 31\n      }\n    }, reply.reply), reply.likes_by_user_ids.length ? /*#__PURE__*/React.createElement(Tooltip, {\n      title: reply.likes_by_user_names.join(', '),\n      arrow: true,\n      placement: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(ButtonStyled, {\n      startIcon: /*#__PURE__*/React.createElement(ThumbUp, {\n        color: reply.like_icon === 'active' ? 'primary' : 'default',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 48\n        }\n      }),\n      onClick: () => handleLike(reply.reply_id, parentIndex, index, reply.like_icon),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 35\n      }\n    }, reply.likes)) : /*#__PURE__*/React.createElement(ButtonStyled, {\n      startIcon: /*#__PURE__*/React.createElement(ThumbUp, {\n        color: reply.like_icon === 'active' ? 'primary' : 'default',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 46\n        }\n      }),\n      onClick: () => handleLike(reply.reply_id, parentIndex, index, reply.like_icon),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 33\n      }\n    }, reply.likes))), /*#__PURE__*/React.createElement(Box, {\n      style: {\n        position: 'relative'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: event => handleClick(event, parentIndex, index, reply.reply_id, reply.reply_user_id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(MoreVert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 31\n      }\n    }))))))))), /*#__PURE__*/React.createElement(Menu, {\n      id: \"long-menu\",\n      anchorEl: anchorEl,\n      keepMounted: true,\n      open: open,\n      onClose: handleClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 13\n      }\n    }, commentOptions.actions.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n      key: option,\n      selected: option === 'Pyxis',\n      onClick: () => handleCommentAction(option, commentOptions),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 17\n      }\n    }, option)))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst mapStateToProps = state => {\n  return {\n    // comments: state.comment.comments.reverse(),\n    comments: state.comment.comments\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getComments: data => dispatch(getComments(data)),\n    addComment: data => dispatch(addComment(data)),\n    commentLike: data => dispatch(commentLike(data)),\n    commentDelete: data => dispatch(commentDelete(data))\n  };\n};\n\nComments.propTypes = {\n  getComments: PropTypes.func.isRequired,\n  comments: PropTypes.array.isRequired,\n  addComment: PropTypes.func.isRequired,\n  commentLike: PropTypes.func.isRequired,\n  commentDelete: PropTypes.func.isRequired\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withSnackbar(Comments));","map":{"version":3,"sources":["/var/www/html/RymindrAppNew/src/container/Comments/Comments.js"],"names":["Message","MoreVert","ThumbUp","Send","Avatar","Box","Button","IconButton","ListItem","ListItemAvatar","ListItemText","Menu","MenuItem","TextField","Typography","Tooltip","Collapse","React","useEffect","useState","styled","PropTypes","connect","withSnackbar","getComments","addComment","commentLike","commentDelete","io","AvatarStyled","height","width","TypoTitleStyled","theme","fontSize","color","palette","secondary","contrastText","marginBottom","AvatarComntStyled","marginRight","TextFieldStyled","EditCommentTextField","TypoCmntName","fontWeight","TypoCmntTxt","ButtonStyled","padding","minWidth","Comments","props","type","postId","postUserId","comments","addCommentRef","useRef","addReplyRef","editCommentRef","aceEditorRef","createRef","user_id","first_name","last_name","profile_image","JSON","parse","localStorage","getItem","showComments","setShowComments","editCommentId","setEditCommentId","editCommentText","setEditCommentText","commentTxt","setCommentTxt","replyTxt","setReplyTxt","commentOptions","setCommentOptions","actions","mounted","sock","on","data","console","log","res","post_id","post_type","dataToSend2","cleanup","dataToSend","handleClick","event","parentIndex","childIndex","commentId","commentUserId","setAnchorEl","currentTarget","loginUserId","parseInt","postOwnerUserId","handleCommentAction","action","commentDetails","splice","id","handleClose","handleAddComment","parent_comment_id","content","comment_type","current","value","key","target","handleDisableComment","keyCode","handleEditComment","comment","reply","handleAddReply","removeElementByValue","array","element","index","indexOf","handleLike","like_icon","temp","userName","likes","likes_by_user_ids","push","likes_by_user_names","Set","anchorEl","open","Boolean","selectedIndex","setSelectedIndex","handleCollapse","warn","require","length","map","comment_id","comment_user_profile_pic","marginTop","comment_user_name","comment_created_at","join","replies","Hide","position","comment_user_id","marginLeft","reply_id","reply_user_profile_pic","reply_user_name","reply_created_at","reply_user_id","option","mapStateToProps","state","mapDispatchToProps","dispatch","propTypes","func","isRequired"],"mappings":";AAAA,SAASA,OAAT,EAAkBC,QAAlB,EAA4BC,OAA5B,EAAqCC,IAArC,QAAiD,oBAAjD;AACA,SACEC,MADF,EAEEC,GAFF,EAGEC,MAHF,EAIEC,UAJF,EAKEC,QALF,EAMEC,cANF,EAOEC,YAPF,EAQEC,IARF,EASEC,QATF,EAUEC,SAVF,EAWEC,UAXF,EAYEC,OAZF,QAaO,mBAbP;AAcA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,MAAT,QAAuB,0BAAvB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,YAAT,QAA6B,WAA7B;AACA,SAASC,WAAT,EAAsBC,UAAtB,EAAkCC,WAAlC,EAA+CC,aAA/C,QAAoE,oCAApE;AAEA,OAAOC,EAAP,MAAe,kBAAf;AACA,MAAMC,YAAY,GAAGT,MAAM,CAAChB,MAAD,CAAN,CAAe;AAClC0B,EAAAA,MAAM,EAAE,EAD0B;AAElCC,EAAAA,KAAK,EAAE,EAF2B;AAGlC,WAAS;AACPD,IAAAA,MAAM,EAAE;AADD;AAHyB,CAAf,CAArB;AAQA,MAAME,eAAe,GAAGZ,MAAM,CAACN,UAAD,CAAN,CAAmB,CAAC;AAAEmB,EAAAA;AAAF,CAAD,MAAgB;AACzDC,EAAAA,QAAQ,EAAE,EAD+C;AAEzDC,EAAAA,KAAK,EAAEF,KAAK,CAACG,OAAN,CAAcC,SAAd,CAAwBC,YAF0B;AAGzDC,EAAAA,YAAY,EAAE;AAH2C,CAAhB,CAAnB,CAAxB;AAMA,MAAMC,iBAAiB,GAAGpB,MAAM,CAAChB,MAAD,CAAN,CAAe;AACvC0B,EAAAA,MAAM,EAAE,EAD+B;AAEvCC,EAAAA,KAAK,EAAE,EAFgC;AAGvCU,EAAAA,WAAW,EAAE;AAH0B,CAAf,CAA1B;AAMA,MAAMC,eAAe,GAAGtB,MAAM,CAACP,SAAD,CAAN,CAAkB;AACxCkB,EAAAA,KAAK,EAAE,MAAM,GAD2B;AAExCD,EAAAA,MAAM,EAAE;AAFgC,CAAlB,CAAxB;AAKA,MAAMa,oBAAoB,GAAGvB,MAAM,CAACP,SAAD,CAAN,CAAkB;AAC7CkB,EAAAA,KAAK,EAAE,KAAK,GADiC;AAE7CD,EAAAA,MAAM,EAAE;AAFqC,CAAlB,CAA7B;AAKA,MAAMc,YAAY,GAAGxB,MAAM,CAACN,UAAD,CAAN,CAAmB;AACtCqB,EAAAA,KAAK,EAAE,SAD+B;AAEtCU,EAAAA,UAAU,EAAE,MAF0B;AAGtCX,EAAAA,QAAQ,EAAE,EAH4B;AAItC,YAAU;AACRW,IAAAA,UAAU,EAAE,QADJ,CAER;;AAFQ;AAJ4B,CAAnB,CAArB;AASA,MAAMC,WAAW,GAAG1B,MAAM,CAACN,UAAD,CAAN,CAAmB;AACrCqB,EAAAA,KAAK,EAAE,SAD8B;AAErCD,EAAAA,QAAQ,EAAE;AAF2B,CAAnB,CAApB;AAKA,MAAMa,YAAY,GAAG3B,MAAM,CAACd,MAAD,CAAN,CAAe;AAClC6B,EAAAA,KAAK,EAAE,SAD2B;AAElCD,EAAAA,QAAQ,EAAE,EAFwB;AAGlCc,EAAAA,OAAO,EAAE,CAHyB;AAIlCC,EAAAA,QAAQ,EAAE;AAJwB,CAAf,CAArB;;AAOA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AAC1B,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,MAAR;AAAgBC,IAAAA,UAAhB;AAA4BC,IAAAA,QAA5B;AAAsC/B,IAAAA,WAAtC;AAAmDC,IAAAA,UAAnD;AAA+DC,IAAAA,WAA/D;AAA4EC,IAAAA;AAA5E,MAA8FwB,KAApG;AACA,QAAMK,aAAa,GAAGvC,KAAK,CAACwC,MAAN,EAAtB;AACA,QAAMC,WAAW,GAAGzC,KAAK,CAACwC,MAAN,EAApB;AACA,QAAME,cAAc,GAAG1C,KAAK,CAACwC,MAAN,EAAvB;AAEA,QAAMG,YAAY,GAAG3C,KAAK,CAAC4C,SAAN,EAArB;AAEA,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,UAAX;AAAuBC,IAAAA,SAAvB;AAAkCC,IAAAA;AAAlC,MAAoDC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAA1D;AAEA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCpD,QAAQ,CAAC,EAAD,CAAhD;AAEA,QAAM,CAACqD,aAAD,EAAgBC,gBAAhB,IAAoCtD,QAAQ,CAAC,IAAD,CAAlD;AAEA,QAAM,CAACuD,eAAD,EAAkBC,kBAAlB,IAAwCxD,QAAQ,CAAC,EAAD,CAAtD;AAEA,QAAM,CAACyD,UAAD,EAAaC,aAAb,IAA8B1D,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM,CAAC2D,QAAD,EAAWC,WAAX,IAA0B5D,QAAQ,CAAC,IAAD,CAAxC;AAEA,QAAM,CAAC6D,cAAD,EAAiBC,iBAAjB,IAAsC9D,QAAQ,CAAC;AACnD+D,IAAAA,OAAO,EAAE,CAAC,2BAAD;AAD0C,GAAD,CAApD,CAnB0B,CAuB1B;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIAhE,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIiE,OAAO,GAAG,IAAd;AACA,QAAIC,IAAI,GAAGxD,EAAE,CAAC,8BAAD,CAAb;AACAwD,IAAAA,IAAI,CAACC,EAAL,CAAQ,qCAAR,EAA+C,UAAUC,IAAV,EAAe;AAC1D,UAAIH,OAAJ,EAAa;AACTI,QAAAA,OAAO,CAACC,GAAR,CAAY,6DAAZ,EAA0EF,IAAI,CAACG,GAA/E;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBnC,MAAzB;;AACA,YAAIiC,IAAI,CAACG,GAAL,CAASC,OAAT,IAAoBrC,MAApB,IAA8BiC,IAAI,CAACG,GAAL,CAASE,SAAT,IAAsBvC,IAAxD,EAA8D;AAC5D,gBAAMwC,WAAW,GAAG;AAClB9B,YAAAA,OAAO,EAAEA,OADS;AAElB4B,YAAAA,OAAO,EAAEJ,IAAI,CAACG,GAAL,CAASC,OAFA;AAGlBC,YAAAA,SAAS,EAAEL,IAAI,CAACG,GAAL,CAASE;AAHF,WAApB;AAKAnE,UAAAA,WAAW,CAACoE,WAAD,CAAX;AACD;AACJ;AACJ,KAbD;AAeA,WAAO,SAASC,OAAT,GAAmB;AACtBV,MAAAA,OAAO,GAAG,KAAV;AACH,KAFD;AAGH,GArBU,EAqBR,CAAC9B,MAAD,CArBQ,CAAT;AAwBAnC,EAAAA,SAAS,CAAC,MAAM;AAEd,QAAImC,MAAM,IAAIC,UAAV,IAAwBF,IAA5B,EAAkC;AAChC,YAAM0C,UAAU,GAAG;AACjBhC,QAAAA,OAAO,EAAEA,OADQ;AAEjB4B,QAAAA,OAAO,EAAErC,MAFQ;AAGjBsC,QAAAA,SAAS,EAAEvC;AAHM,OAAnB;AAMA5B,MAAAA,WAAW,CAACsE,UAAD,CAAX;AACD;AAEF,GAZQ,EAYN,CAACzC,MAAD,CAZM,CAAT;;AAiBA,QAAM0C,WAAW,GAAG,CAACC,KAAD,EAAQC,WAAR,EAAqBC,UAArB,EAAiCC,SAAjC,EAA4CC,aAA5C,KAA8D;AAChFC,IAAAA,WAAW,CAACL,KAAK,CAACM,aAAP,CAAX;AACA,QAAIpB,OAAO,GAAG,EAAd;AACA,QAAIqB,WAAW,GAAGC,QAAQ,CAAC1C,OAAD,CAA1B;AACA,QAAI2C,eAAe,GAAGD,QAAQ,CAAClD,UAAD,CAA9B;;AACA,YAAQkD,QAAQ,CAACJ,aAAD,CAAhB;AACE,WAAKG,WAAL;AACErB,QAAAA,OAAO,GAAG,CAAC,SAAD,EAAY,WAAZ,EAAyB,2BAAzB,CAAV;AACA;;AACF,WAAKuB,eAAL;AACEvB,QAAAA,OAAO,GAAG,CAAC,WAAD,EAAc,2BAAd,CAAV;AACA;;AACF;AACEA,QAAAA,OAAO,GAAG,CAAC,2BAAD,CAAV;AACA;AATJ;;AAWAD,IAAAA,iBAAiB,CAAC;AAChBgB,MAAAA,WADgB;AAEhBC,MAAAA,UAFgB;AAGhBC,MAAAA,SAHgB;AAIhBC,MAAAA,aAJgB;AAKhBlB,MAAAA;AALgB,KAAD,CAAjB;AAOD,GAvBD;;AAyBA,QAAMwB,mBAAmB,GAAG,CAACC,MAAD,EAASC,cAAT,KAA4B;AACtDP,IAAAA,WAAW,CAAC,IAAD,CAAX;;AACA,YAAQM,MAAR;AACE,WAAK,WAAL;AACE,YAAIC,cAAc,CAACX,WAAf,KAA+B,IAAnC,EACE1C,QAAQ,CAACqD,cAAc,CAACX,WAAhB,CAAR,CAAqC,SAArC,EAAgDY,MAAhD,CAAuDD,cAAc,CAACV,UAAtE,EAAkF,CAAlF,EADF,KAEK3C,QAAQ,CAACsD,MAAT,CAAgBD,cAAc,CAACV,UAA/B,EAA2C,CAA3C;AACL,cAAMJ,UAAU,GAAG;AACjBhC,UAAAA,OAAO,EAAEA,OADQ;AAEjBgD,UAAAA,EAAE,EAAEF,cAAc,CAACT;AAFF,SAAnB;AAIAxE,QAAAA,aAAa,CAACmE,UAAD,CAAb;AACA;;AACF,WAAK,SAAL;AACErB,QAAAA,gBAAgB,CAACmC,cAAc,CAACT,SAAhB,CAAhB;AACAZ,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA;;AACF;AACE;AAhBJ;AAkBD,GApBD;;AAsBA,QAAMuB,WAAW,GAAG,MAAM;AACxBV,IAAAA,WAAW,CAAC,IAAD,CAAX;AACD,GAFD;;AAIA,QAAMW,gBAAgB,GAAIhB,KAAD,IAAW;AAClC,QAAIA,KAAK,IAAI,OAAb,EAAsB;AACpB,UAAIpB,UAAU,KAAK,EAAnB,EAAuB;AACrB,cAAMkB,UAAU,GAAG;AACjBhC,UAAAA,OAAO,EAAEA,OADQ;AAEjB4B,UAAAA,OAAO,EAAEvC,KAAK,CAACE,MAFE;AAGjBsC,UAAAA,SAAS,EAAExC,KAAK,CAACC,IAHA;AAIjB6D,UAAAA,iBAAiB,EAAE,EAJF;AAKjBC,UAAAA,OAAO,EAAEtC,UALQ;AAMjBuC,UAAAA,YAAY,EAAE;AANG,SAAnB;AASA1F,QAAAA,UAAU,CAACqE,UAAD,CAAV;AACAjB,QAAAA,aAAa,CAAC,EAAD,CAAb;AACArB,QAAAA,aAAa,CAAC4D,OAAd,CAAsBC,KAAtB,GAA8B,EAA9B;AACD;AACF,KAfD,MAeO,IAAIrB,KAAK,CAACsB,GAAN,KAAc,OAAd,IAAyBtB,KAAK,CAACuB,MAAN,CAAaF,KAAb,KAAuB,EAApD,EAAwD;AAC7D,YAAMvB,UAAU,GAAG;AACjBhC,QAAAA,OAAO,EAAEA,OADQ;AAEjB4B,QAAAA,OAAO,EAAEvC,KAAK,CAACE,MAFE;AAGjBsC,QAAAA,SAAS,EAAExC,KAAK,CAACC,IAHA;AAIjB6D,QAAAA,iBAAiB,EAAE,EAJF;AAKjBC,QAAAA,OAAO,EAAElB,KAAK,CAACuB,MAAN,CAAaF,KALL;AAMjBF,QAAAA,YAAY,EAAE;AANG,OAAnB;AASA1F,MAAAA,UAAU,CAACqE,UAAD,CAAV;AACAE,MAAAA,KAAK,CAACuB,MAAN,CAAaF,KAAb,GAAqB,EAArB;AACD;AACF,GA7BD;;AA+BA,QAAMG,oBAAoB,GAAIxB,KAAD,IAAW;AACtC,QAAIA,KAAK,CAACyB,OAAN,KAAkB,EAAtB,EAA0B;AACxBlC,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAf,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAE,MAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACD;AACF,GAND;;AAQA,QAAM+C,iBAAiB,GAAG,CAAC1B,KAAD,EAAQG,SAAR,EAAmBF,WAAnB,EAAgCC,UAAhC,KAA+C;AACvE,QAAIF,KAAK,IAAI,OAAb,EAAsB;AACpB,UAAItB,eAAe,KAAK,EAAxB,EAA4B;AAC1B,YAAIuB,WAAW,KAAK,IAApB,EAA0B1C,QAAQ,CAAC2C,UAAD,CAAR,CAAqByB,OAArB,GAA+BjD,eAA/B,CAA1B,KACKnB,QAAQ,CAAC0C,WAAD,CAAR,CAAsB,SAAtB,EAAiCC,UAAjC,EAA6C0B,KAA7C,GAAqDlD,eAArD;AACL,cAAMoB,UAAU,GAAG;AACjBgB,UAAAA,EAAE,EAAEX,SADa;AAEjBrC,UAAAA,OAAO,EAAEA,OAFQ;AAGjB4B,UAAAA,OAAO,EAAEvC,KAAK,CAACE,MAHE;AAIjBsC,UAAAA,SAAS,EAAExC,KAAK,CAACC,IAJA;AAKjB6D,UAAAA,iBAAiB,EAAE,EALF;AAMjBC,UAAAA,OAAO,EAAExC,eANQ;AAOjByC,UAAAA,YAAY,EAAE;AAPG,SAAnB;AASA1F,QAAAA,UAAU,CAACqE,UAAD,CAAV,CAZ0B,CAa1B;;AACArB,QAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAE,QAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACAhB,QAAAA,cAAc,CAACyD,OAAf,CAAuBC,KAAvB,GAA+B,EAA/B;AACD,OAjBD,MAiBO,IAAI3C,eAAe,KAAK,EAAxB,EAA4B;AACjCC,QAAAA,kBAAkB,CAChBsB,WAAW,KAAK,IAAhB,GAAuB1C,QAAQ,CAAC2C,UAAD,CAAR,CAAqByB,OAA5C,GAAsDpE,QAAQ,CAAC0C,WAAD,CAAR,CAAsB,SAAtB,EAAiCC,UAAjC,EAA6C0B,KADnF,CAAlB;AAGD;AACF,KAvBD,MAuBO,IAAI5B,KAAK,CAACsB,GAAN,KAAc,OAAd,IAAyBtB,KAAK,CAACuB,MAAN,CAAaF,KAAb,KAAuB,EAApD,EAAwD;AAC7D,UAAIrB,KAAK,CAACsB,GAAN,KAAc,OAAd,IAAyBtB,KAAK,CAACuB,MAAN,CAAaF,KAAb,KAAuB,EAApD,EAAwD;AACtD,YAAIpB,WAAW,KAAK,IAApB,EAA0B1C,QAAQ,CAAC2C,UAAD,CAAR,CAAqByB,OAArB,GAA+B3B,KAAK,CAACuB,MAAN,CAAaF,KAA5C,CAA1B,KACK9D,QAAQ,CAAC0C,WAAD,CAAR,CAAsB,SAAtB,EAAiCC,UAAjC,EAA6C0B,KAA7C,GAAqD5B,KAAK,CAACuB,MAAN,CAAaF,KAAlE;AACL,cAAMvB,UAAU,GAAG;AACjBgB,UAAAA,EAAE,EAAEX,SADa;AAEjBrC,UAAAA,OAAO,EAAEA,OAFQ;AAGjB4B,UAAAA,OAAO,EAAEvC,KAAK,CAACE,MAHE;AAIjBsC,UAAAA,SAAS,EAAExC,KAAK,CAACC,IAJA;AAKjB6D,UAAAA,iBAAiB,EAAE,EALF;AAMjBC,UAAAA,OAAO,EAAElB,KAAK,CAACuB,MAAN,CAAaF,KANL;AAOjBF,UAAAA,YAAY,EAAE;AAPG,SAAnB;AASA1F,QAAAA,UAAU,CAACqE,UAAD,CAAV;AACAE,QAAAA,KAAK,CAACuB,MAAN,CAAaF,KAAb,GAAqB,EAArB;AACA5C,QAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAE,QAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACD,OAhBD,MAgBO,IAAID,eAAe,KAAK,EAAxB,EAA4B;AACjCC,QAAAA,kBAAkB,CAChBsB,WAAW,KAAK,IAAhB,GAAuB1C,QAAQ,CAAC2C,UAAD,CAAR,CAAqByB,OAA5C,GAAsDpE,QAAQ,CAAC0C,WAAD,CAAR,CAAsB,SAAtB,EAAiCC,UAAjC,EAA6C0B,KADnF,CAAlB;AAGD;AACF;AACF,GA/CD;;AAiDA,QAAMC,cAAc,GAAG,CAAC7B,KAAD,EAAQG,SAAR,KAAsB;AAC3C,QAAIH,KAAK,IAAI,OAAb,EAAsB;AACpB,YAAMF,UAAU,GAAG;AACjBhC,QAAAA,OAAO,EAAEA,OADQ;AAEjB4B,QAAAA,OAAO,EAAEvC,KAAK,CAACE,MAFE;AAGjBsC,QAAAA,SAAS,EAAExC,KAAK,CAACC,IAHA;AAIjB6D,QAAAA,iBAAiB,EAAEd,SAJF;AAKjBe,QAAAA,OAAO,EAAEpC,QALQ;AAMjBqC,QAAAA,YAAY,EAAE;AANG,OAAnB;AASA1F,MAAAA,UAAU,CAACqE,UAAD,CAAV;AACAf,MAAAA,WAAW,CAAC,EAAD,CAAX;AACArB,MAAAA,WAAW,CAAC0D,OAAZ,CAAoBC,KAApB,GAA4B,EAA5B;AACD,KAbD,MAaO,IAAIrB,KAAK,CAACsB,GAAN,KAAc,OAAd,IAAyBtB,KAAK,CAACuB,MAAN,CAAaF,KAAb,KAAuB,EAApD,EAAwD;AAC7D,YAAMvB,UAAU,GAAG;AACjBhC,QAAAA,OAAO,EAAEA,OADQ;AAEjB4B,QAAAA,OAAO,EAAEvC,KAAK,CAACE,MAFE;AAGjBsC,QAAAA,SAAS,EAAExC,KAAK,CAACC,IAHA;AAIjB6D,QAAAA,iBAAiB,EAAEd,SAJF;AAKjBe,QAAAA,OAAO,EAAElB,KAAK,CAACuB,MAAN,CAAaF,KALL;AAMjBF,QAAAA,YAAY,EAAE;AANG,OAAnB;AASA1F,MAAAA,UAAU,CAACqE,UAAD,CAAV;AACAE,MAAAA,KAAK,CAACuB,MAAN,CAAaF,KAAb,GAAqB,EAArB;AACD;AACF,GA3BD;;AA6BA,QAAMS,oBAAoB,GAAG,CAACC,KAAD,EAAQC,OAAR,KAAoB;AAC/C,QAAIC,KAAK,GAAGF,KAAK,CAACG,OAAN,CAAcF,OAAd,CAAZ;AACA,QAAIC,KAAK,KAAK,CAAC,CAAf,EAAkBF,KAAK,CAAClB,MAAN,CAAaoB,KAAb,EAAoB,CAApB;AAClB,WAAOF,KAAP;AACD,GAJD;;AAMA,QAAMI,UAAU,GAAG,CAAC9E,MAAD,EAAS4C,WAAT,EAAsBgC,KAAtB,EAA6BG,SAA7B,KAA2C;AAC5D,QAAIC,IAAI,GAAG9E,QAAX;AACA,QAAI+E,QAAQ,GAAGvE,UAAU,GAAG,GAAb,GAAmBC,SAAlC;;AACA,QAAIiC,WAAW,KAAK,IAApB,EAA0B;AACxB,UAAImC,SAAS,KAAK,UAAlB,EAA8B;AAC5BC,QAAAA,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCM,KAApC;AACAF,QAAAA,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCG,SAApC,GAAgD,QAAhD;AACAC,QAAAA,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCO,iBAApC,CAAsDC,IAAtD,CAA2D3E,OAA3D;AACAuE,QAAAA,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCS,mBAApC,CAAwDD,IAAxD,CAA6DH,QAA7D;AACD,OALD,MAKO;AACLD,QAAAA,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCM,KAApC;AACAF,QAAAA,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCG,SAApC,GAAgD,UAAhD;AACAC,QAAAA,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCO,iBAApC,GAAwDV,oBAAoB,CAC1EO,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCO,iBADsC,EAE1E1E,OAF0E,CAA5E;AAIAuE,QAAAA,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCS,mBAApC,GAA0DZ,oBAAoB,CAC5EO,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCS,mBADwC,EAE5EJ,QAF4E,CAA9E;AAID;;AACD/C,MAAAA,OAAO,CAACC,GAAR,CAAY6C,IAAI,CAACpC,WAAD,CAAJ,CAAkB,SAAlB,EAA6BgC,KAA7B,EAAoCS,mBAAhD;AACD,KAnBD,MAmBO;AACL,UAAIN,SAAS,KAAK,UAAlB,EAA8B;AAC5BC,QAAAA,IAAI,CAACJ,KAAD,CAAJ,CAAYM,KAAZ;AACAF,QAAAA,IAAI,CAACJ,KAAD,CAAJ,CAAYG,SAAZ,GAAwB,QAAxB;AACAC,QAAAA,IAAI,CAACJ,KAAD,CAAJ,CAAYO,iBAAZ,CAA8BC,IAA9B,CAAmC3E,OAAnC;AACAuE,QAAAA,IAAI,CAACJ,KAAD,CAAJ,CAAYS,mBAAZ,CAAgCD,IAAhC,CAAqCH,QAArC;AACD,OALD,MAKO;AACLD,QAAAA,IAAI,CAACJ,KAAD,CAAJ,CAAYM,KAAZ;AACAF,QAAAA,IAAI,CAACJ,KAAD,CAAJ,CAAYG,SAAZ,GAAwB,UAAxB;AACAC,QAAAA,IAAI,CAACJ,KAAD,CAAJ,CAAYO,iBAAZ,GAAgCV,oBAAoB,CAACO,IAAI,CAACJ,KAAD,CAAJ,CAAYO,iBAAb,EAAgC1E,OAAhC,CAApD;AACAuE,QAAAA,IAAI,CAACJ,KAAD,CAAJ,CAAYS,mBAAZ,GAAkCZ,oBAAoB,CAACO,IAAI,CAACJ,KAAD,CAAJ,CAAYS,mBAAb,EAAkCJ,QAAlC,CAAtD;AACD;AACF;;AACD/D,IAAAA,eAAe,CAAC,IAAIoE,GAAJ,CAAQN,IAAR,CAAD,CAAf;AACA9C,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgClB,YAAhC;AACA,UAAMwB,UAAU,GAAG;AACjBhC,MAAAA,OAAO,EAAEA,OADQ;AAEjB4B,MAAAA,OAAO,EAAErC,MAFQ;AAGjBsC,MAAAA,SAAS,EAAE,SAHM;AAIjBgB,MAAAA,MAAM,EAAEyB,SAAS,KAAK,UAAd,GAA2B,KAA3B,GAAmC;AAJ1B,KAAnB;AAMA1G,IAAAA,WAAW,CAACoE,UAAD,CAAX;AACD,GA5CD;;AA8CA,QAAM,CAAC8C,QAAD,EAAWvC,WAAX,IAA0BlF,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM0H,IAAI,GAAGC,OAAO,CAACF,QAAD,CAApB;AAEA,QAAM,CAACG,aAAD,EAAgBC,gBAAhB,IAAoC/H,KAAK,CAACE,QAAN,CAAe,EAAf,CAA1C;;AAEA,QAAM8H,cAAc,GAAIhB,KAAD,IAAW;AAChC1C,IAAAA,OAAO,CAAC2D,IAAR,CAAa,yBAAb,EAAwCH,aAAa,KAAKd,KAA1D,EAAiEc,aAAjE,EAAgFd,KAAhF;;AACA,QAAIc,aAAa,KAAKd,KAAtB,EAA6B;AAC3Be,MAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACD,KAFD,MAEO;AACLA,MAAAA,gBAAgB,CAACf,KAAD,CAAhB;AACD;AACF,GAPD;;AASA,sBACE,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAC,iBAApB;AAAsC,IAAA,UAAU,EAAC,YAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,GAAG,EAAC,EAAlB;AAAqB,IAAA,OAAO,EAAC,QAA7B;AAAsC,IAAA,GAAG,EAAEkB,OAAO,CAAC,iCAAD,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,eAKE,oBAAC,YAAD;AACE,IAAA,OAAO,eACL,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAkB5F,QAAQ,CAAC6F,MAAT,KAAoB,CAApB,GAAwB,WAAxB,GAAsC7F,QAAQ,CAAC6F,MAAT,GAAkB,WAA1E,CAFJ;AAIE,IAAA,SAAS,eACP,uDACE,oBAAC,GAAD;AAAK,MAAA,OAAO,EAAC,MAAb;AAAoB,MAAA,SAAS,EAAC,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,iBAAD;AAAmB,MAAA,GAAG,EAAC,EAAvB;AAA0B,MAAA,GAAG,EAAEnF,aAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE,oBAAC,eAAD;AACE,MAAA,QAAQ,EAAET,aADZ;AAEE,MAAA,WAAW,EAAC,kBAFd;AAGE,MAAA,QAAQ,EAAGwC,KAAD,IAAWnB,aAAa,CAACmB,KAAK,CAACuB,MAAN,CAAaF,KAAd,CAHpC;AAIE,MAAA,UAAU,EAAGrB,KAAD,IAAWgB,gBAAgB,CAAChB,KAAD,CAJzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAQE,oBAAC,UAAD;AACE,oBAAW,MADb;AAEE,uBAAc,WAFhB;AAGE,uBAAc,MAHhB;AAIE,MAAA,QAAQ,EAAEpB,UAAU,GAAG,KAAH,GAAW,IAJjC;AAKE,MAAA,OAAO,EAAGoB,KAAD,IAAWgB,gBAAgB,CAAC,OAAD,CALtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAOE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,CARF,CADF,EAmBGzD,QAAQ,CAAC8F,GAAT,CAAa,CAAC1B,OAAD,EAAU1B,WAAV,kBACZ,0CACG0B,OAAO,CAAC2B,UAAR,KAAuB9E,aAAvB,gBACC,oBAAC,GAAD;AAAK,MAAA,OAAO,EAAC,MAAb;AAAoB,MAAA,KAAK,EAAE;AAAEjC,QAAAA,YAAY,EAAE;AAAhB,OAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,iBAAD;AAAmB,MAAA,GAAG,EAAC,EAAvB;AAA0B,MAAA,GAAG,EAAEoF,OAAO,CAAC4B,wBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE,oBAAC,GAAD;AAAK,MAAA,KAAK,EAAE,CAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,oBAAD;AACE,MAAA,QAAQ,EAAE5F,cADZ;AAEE,MAAA,YAAY,EAAEgE,OAAO,CAACA,OAFxB;AAGE,MAAA,SAAS,EAAG3B,KAAD,IAAWwB,oBAAoB,CAACxB,KAAD,CAH5C;AAIE,MAAA,UAAU,EAAGA,KAAD,IAAW0B,iBAAiB,CAAC1B,KAAD,EAAQ2B,OAAO,CAAC2B,UAAhB,EAA4B,IAA5B,EAAkCrD,WAAlC,CAJ1C;AAKE,MAAA,QAAQ,EAAGD,KAAD,IAAWrB,kBAAkB,CAACqB,KAAK,CAACuB,MAAN,CAAaF,KAAd,CALzC,CAME;AANF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eASE,oBAAC,UAAD;AACE,oBAAW,MADb;AAEE,uBAAc,WAFhB;AAGE,uBAAc,MAHhB;AAIE,MAAA,OAAO,EAAE,MAAMK,iBAAiB,CAAC,OAAD,EAAUC,OAAO,CAAC2B,UAAlB,EAA8B,IAA9B,EAAoCrD,WAApC,CAJlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAME,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CATF,CAFF,CADD,gBAwBC,oBAAC,GAAD;AAAK,MAAA,OAAO,EAAC,MAAb;AAAoB,MAAA,cAAc,EAAC,eAAnC;AAAmD,MAAA,KAAK,EAAE;AAAEuD,QAAAA,SAAS,EAAE;AAAb,OAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAK,MAAA,OAAO,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,iBAAD;AAAmB,MAAA,GAAG,EAAC,EAAvB;AAA0B,MAAA,GAAG,EAAE7B,OAAO,CAAC4B,wBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGG5B,OAAO,CAAC8B,iBAHX,eAIE,oBAAC,GAAD;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAwB9B,OAAO,CAAC+B,kBAAhC,CAJF,CADF,eAOE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAc/B,OAAO,CAACA,OAAtB,CAPF,EAQGA,OAAO,CAACa,iBAAR,CAA0BY,MAA1B,gBACC,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAEzB,OAAO,CAACe,mBAAR,CAA4BiB,IAA5B,CAAiC,IAAjC,CAAhB;AAAwD,MAAA,KAAK,MAA7D;AAA8D,MAAA,SAAS,EAAC,MAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AACE,MAAA,SAAS,eAAE,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAEhC,OAAO,CAACS,SAAR,KAAsB,QAAtB,GAAiC,SAAjC,GAA6C,SAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADb;AAEE,MAAA,OAAO,EAAE,MAAMD,UAAU,CAACR,OAAO,CAAC2B,UAAT,EAAqB,IAArB,EAA2BrD,WAA3B,EAAwC0B,OAAO,CAACS,SAAhD,CAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGT,OAAO,CAACY,KAJX,CADF,CADD,gBAUC,oBAAC,YAAD;AACE,MAAA,SAAS,eAAE,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAEZ,OAAO,CAACS,SAAR,KAAsB,QAAtB,GAAiC,SAAjC,GAA6C,SAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADb;AAEE,MAAA,OAAO,EAAE,MAAMD,UAAU,CAACR,OAAO,CAAC2B,UAAT,EAAqB,IAArB,EAA2BrD,WAA3B,EAAwC0B,OAAO,CAACS,SAAhD,CAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGT,OAAO,CAACY,KAJX,CAlBJ,eAyBE,oBAAC,YAAD;AACE,MAAA,OAAO,EAAE,MAAM;AACbU,QAAAA,cAAc,CAAChD,WAAD,CAAd;AACD,OAHH;AAIE,MAAA,SAAS,eAAE,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMG0B,OAAO,CAACiC,OAAR,CAAgBR,MAAhB,GACGzB,OAAO,CAACiC,OAAR,CAAgBR,MAAhB,GAAyB,CAAzB,GACEzB,OAAO,CAACiC,OAAR,CAAgBR,MAAhB,GAAyB,UAD3B,GAEE,SAHL,GAIG,OAVN,CAzBF,CAFF,CADF,EA0CI,CAACjG,KAAK,CAAC0G,IAAP,iBAAe,oBAAC,GAAD;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACf,oBAAC,UAAD;AACE,oBAAW,MADb;AAEE,uBAAc,WAFhB;AAGE,uBAAc,MAHhB;AAIE,MAAA,OAAO,EAAG9D,KAAD,IACPD,WAAW,CAACC,KAAD,EAAQ,IAAR,EAAcC,WAAd,EAA2B0B,OAAO,CAAC2B,UAAnC,EAA+C3B,OAAO,CAACoC,eAAvD,CALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,CADe,CA1CnB,CAzBJ,eAiFE,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAE9D,WAAW,KAAK8C,aAA9B;AAA6C,MAAA,OAAO,EAAC,MAArD;AAA4D,MAAA,aAAa,MAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAK,MAAA,KAAK,EAAE;AAAEiB,QAAAA,UAAU,EAAE,GAAd;AAAmBR,QAAAA,SAAS,EAAE;AAA9B,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAK,MAAA,OAAO,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,iBAAD;AAAmB,MAAA,GAAG,EAAC,EAAvB;AAA0B,MAAA,GAAG,EAAEvF,aAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE,oBAAC,eAAD;AACE,MAAA,QAAQ,EAAEP,WADZ;AAEE,MAAA,WAAW,EAAC,gBAFd;AAGE,MAAA,UAAU,EAAGsC,KAAD,IAAW6B,cAAc,CAAC7B,KAAD,EAAQ2B,OAAO,CAAC2B,UAAhB,CAHvC;AAIE,MAAA,QAAQ,EAAGtD,KAAD,IAAWjB,WAAW,CAACiB,KAAK,CAACuB,MAAN,CAAaF,KAAd,CAJlC,CAKE;AALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eASE,oBAAC,UAAD;AACE,oBAAW,MADb;AAEE,uBAAc,WAFhB;AAGE,uBAAc,MAHhB;AAIE,MAAA,OAAO,EAAGrB,KAAD,IAAW6B,cAAc,CAAC,OAAD,EAAUF,OAAO,CAAC2B,UAAlB,CAJpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAME,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CATF,CADF,CADF,EAsBG3B,OAAO,CAACiC,OAAR,CAAgBP,GAAhB,CAAoB,CAACzB,KAAD,EAAQK,KAAR,EAAe;AAAEmB,MAAAA;AAAF,KAAf,kBACnB,0CACGxB,KAAK,CAACqC,QAAN,KAAmBzF,aAAnB,gBACC,oBAAC,GAAD;AAAK,MAAA,OAAO,EAAC,MAAb;AAAoB,MAAA,KAAK,EAAE;AAAEwF,QAAAA,UAAU,EAAE,GAAd;AAAmBzH,QAAAA,YAAY,EAAE;AAAjC,OAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,iBAAD;AAAmB,MAAA,GAAG,EAAC,EAAvB;AAA0B,MAAA,GAAG,EAAE0B,aAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE,oBAAC,GAAD;AAAK,MAAA,KAAK,EAAE,CAAZ;AAAe,MAAA,OAAO,EAAC,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,oBAAD;AACE,MAAA,QAAQ,EAAEN,cADZ;AAEE,MAAA,YAAY,EAAEiE,KAAK,CAACA,KAFtB;AAGE,MAAA,SAAS,EAAG5B,KAAD,IAAWwB,oBAAoB,CAACxB,KAAD,CAH5C;AAIE,MAAA,QAAQ,EAAGA,KAAD,IAAWrB,kBAAkB,CAACqB,KAAK,CAACuB,MAAN,CAAaF,KAAd,CAJzC;AAKE,MAAA,UAAU,EAAGrB,KAAD,IAAW0B,iBAAiB,CAAC1B,KAAD,EAAQ4B,KAAK,CAACqC,QAAd,EAAwBhE,WAAxB,EAAqCgC,KAArC,CAL1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE,oBAAC,UAAD;AACE,oBAAW,MADb;AAEE,uBAAc,WAFhB;AAGE,uBAAc,MAHhB;AAIE,MAAA,OAAO,EAAE,MAAMP,iBAAiB,CAAC,OAAD,EAAUE,KAAK,CAACqC,QAAhB,EAA0BhE,WAA1B,EAAuCgC,KAAvC,CAJlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAME,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CARF,CAFF,CADD,gBAuBC,oBAAC,GAAD;AACE,MAAA,OAAO,EAAC,MADV;AAEE,MAAA,cAAc,EAAC,eAFjB;AAGE,MAAA,SAAS,EAAC,OAHZ;AAIE,MAAA,KAAK,EAAE;AAAE+B,QAAAA,UAAU,EAAE;AAAd,OAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAME,oBAAC,GAAD;AAAK,MAAA,OAAO,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,iBAAD;AAAmB,MAAA,GAAG,EAAC,EAAvB;AAA0B,MAAA,GAAG,EAAEpC,KAAK,CAACsC,sBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGtC,KAAK,CAACuC,eADT,eAEE,oBAAC,GAAD;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAwBvC,KAAK,CAACwC,gBAA9B,CAFF,CADF,eAKE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAcxC,KAAK,CAACA,KAApB,CALF,EAMGA,KAAK,CAACY,iBAAN,CAAwBY,MAAxB,gBACC,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAExB,KAAK,CAACc,mBAAN,CAA0BiB,IAA1B,CAA+B,IAA/B,CAAhB;AAAsD,MAAA,KAAK,MAA3D;AAA4D,MAAA,SAAS,EAAC,MAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AACE,MAAA,SAAS,eAAE,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAE/B,KAAK,CAACQ,SAAN,KAAoB,QAApB,GAA+B,SAA/B,GAA2C,SAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADb;AAEE,MAAA,OAAO,EAAE,MAAMD,UAAU,CAACP,KAAK,CAACqC,QAAP,EAAiBhE,WAAjB,EAA8BgC,KAA9B,EAAqCL,KAAK,CAACQ,SAA3C,CAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGR,KAAK,CAACW,KAJT,CADF,CADD,gBAUC,oBAAC,YAAD;AACE,MAAA,SAAS,eAAE,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAEX,KAAK,CAACQ,SAAN,KAAoB,QAApB,GAA+B,SAA/B,GAA2C,SAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADb;AAEE,MAAA,OAAO,EAAE,MAAMD,UAAU,CAACP,KAAK,CAACqC,QAAP,EAAiBhE,WAAjB,EAA8BgC,KAA9B,EAAqCL,KAAK,CAACQ,SAA3C,CAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGR,KAAK,CAACW,KAJT,CAhBJ,CAFF,CANF,eAiCE,oBAAC,GAAD;AAAK,MAAA,KAAK,EAAE;AAAEuB,QAAAA,QAAQ,EAAE;AAAZ,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AACE,oBAAW,MADb;AAEE,uBAAc,WAFhB;AAGE,uBAAc,MAHhB;AAIE,MAAA,OAAO,EAAG9D,KAAD,IACPD,WAAW,CAACC,KAAD,EAAQC,WAAR,EAAqBgC,KAArB,EAA4BL,KAAK,CAACqC,QAAlC,EAA4CrC,KAAK,CAACyC,aAAlD,CALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,CADF,CAjCF,CAxBJ,CADD,CAtBH,CAjFF,CADD,CAnBH,eAyME,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,WAAT;AAAqB,MAAA,QAAQ,EAAEzB,QAA/B;AAAyC,MAAA,WAAW,MAApD;AAAqD,MAAA,IAAI,EAAEC,IAA3D;AAAiE,MAAA,OAAO,EAAE9B,WAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG/B,cAAc,CAACE,OAAf,CAAuBmE,GAAvB,CAA4BiB,MAAD,iBAC1B,oBAAC,QAAD;AACE,MAAA,GAAG,EAAEA,MADP;AAEE,MAAA,QAAQ,EAAEA,MAAM,KAAK,OAFvB;AAGE,MAAA,OAAO,EAAE,MAAM5D,mBAAmB,CAAC4D,MAAD,EAAStF,cAAT,CAHpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKGsF,MALH,CADD,CADH,CAzMF,CALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CADF;AAoOD,CA7iBD;;AA+iBA,MAAMC,eAAe,GAAIC,KAAD,IAAW;AAEjC,SAAO;AACL;AACAjH,IAAAA,QAAQ,EAAEiH,KAAK,CAAC7C,OAAN,CAAcpE;AAFnB,GAAP;AAID,CAND;;AAQA,MAAMkH,kBAAkB,GAAIC,QAAD,IAAc;AACvC,SAAO;AACLlJ,IAAAA,WAAW,EAAG8D,IAAD,IAAUoF,QAAQ,CAAClJ,WAAW,CAAC8D,IAAD,CAAZ,CAD1B;AAEL7D,IAAAA,UAAU,EAAG6D,IAAD,IAAUoF,QAAQ,CAACjJ,UAAU,CAAC6D,IAAD,CAAX,CAFzB;AAGL5D,IAAAA,WAAW,EAAG4D,IAAD,IAAUoF,QAAQ,CAAChJ,WAAW,CAAC4D,IAAD,CAAZ,CAH1B;AAIL3D,IAAAA,aAAa,EAAG2D,IAAD,IAAUoF,QAAQ,CAAC/I,aAAa,CAAC2D,IAAD,CAAd;AAJ5B,GAAP;AAMD,CAPD;;AASApC,QAAQ,CAACyH,SAAT,GAAqB;AACnBnJ,EAAAA,WAAW,EAAEH,SAAS,CAACuJ,IAAV,CAAeC,UADT;AAEnBtH,EAAAA,QAAQ,EAAElC,SAAS,CAAC0G,KAAV,CAAgB8C,UAFP;AAGnBpJ,EAAAA,UAAU,EAAEJ,SAAS,CAACuJ,IAAV,CAAeC,UAHR;AAInBnJ,EAAAA,WAAW,EAAEL,SAAS,CAACuJ,IAAV,CAAeC,UAJT;AAKnBlJ,EAAAA,aAAa,EAAEN,SAAS,CAACuJ,IAAV,CAAeC;AALX,CAArB;AAQA,eAAevJ,OAAO,CAACiJ,eAAD,EAAkBE,kBAAlB,CAAP,CAA6ClJ,YAAY,CAAC2B,QAAD,CAAzD,CAAf","sourcesContent":["import { Message, MoreVert, ThumbUp, Send } from '@material-ui/icons';\nimport {\n  Avatar,\n  Box,\n  Button,\n  IconButton,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Menu,\n  MenuItem,\n  TextField,\n  Typography,\n  Tooltip,\n} from '@material-ui/core';\nimport Collapse from '@material-ui/core/Collapse';\nimport React, { useEffect, useState } from 'react';\nimport { styled } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withSnackbar } from 'notistack';\nimport { getComments, addComment, commentLike, commentDelete } from '../../store/actions/commentActions';\n\nimport io from 'socket.io-client';\nconst AvatarStyled = styled(Avatar)({\n  height: 25,\n  width: 25,\n  '& img': {\n    height: 'auto',\n  },\n});\n\nconst TypoTitleStyled = styled(Typography)(({ theme }) => ({\n  fontSize: 14,\n  color: theme.palette.secondary.contrastText,\n  marginBottom: 10,\n}));\n\nconst AvatarComntStyled = styled(Avatar)({\n  height: 42,\n  width: 42,\n  marginRight: 20,\n});\n\nconst TextFieldStyled = styled(TextField)({\n  width: 100 + '%',\n  height: 50,\n});\n\nconst EditCommentTextField = styled(TextField)({\n  width: 95 + '%',\n  height: 50,\n});\n\nconst TypoCmntName = styled(Typography)({\n  color: '#757575',\n  fontWeight: 'bold',\n  fontSize: 12,\n  '& span': {\n    fontWeight: 'normal',\n    // marginLeft: 20,\n  },\n});\nconst TypoCmntTxt = styled(Typography)({\n  color: '#3d3d3d',\n  fontSize: 14,\n});\n\nconst ButtonStyled = styled(Button)({\n  color: '#757575',\n  fontSize: 12,\n  padding: 0,\n  minWidth: 'auto',\n});\n\nconst Comments = (props) => {\n  const { type, postId, postUserId, comments, getComments, addComment, commentLike, commentDelete } = props;  \n  const addCommentRef = React.useRef();\n  const addReplyRef = React.useRef();\n  const editCommentRef = React.useRef();\n\n  const aceEditorRef = React.createRef();\n\n  const { user_id, first_name, last_name, profile_image } = JSON.parse(localStorage.getItem('userData'));\n\n  const [showComments, setShowComments] = useState([]);\n\n  const [editCommentId, setEditCommentId] = useState(null);\n\n  const [editCommentText, setEditCommentText] = useState('');\n\n  const [commentTxt, setCommentTxt] = useState(null);\n  const [replyTxt, setReplyTxt] = useState(null);\n\n  const [commentOptions, setCommentOptions] = useState({\n    actions: ['Turn off notifications...'],\n  });\n\n  // useEffect(() => {\n  //   var pusher = new Pusher('b5678cf7a65e2065a151', {\n  //     cluster: 'eu',\n  //     encrypted: true,\n  //   });\n    \n  //   var channel = pusher.subscribe('comment-add');\n  //   if (postId && postUserId && type) {\n  //     const dataToSend = {\n  //       user_id: user_id,\n  //       post_id: postId,\n  //       post_type: type,\n  //     };\n\n  //     getComments(dataToSend);\n\n  //     channel.bind('my-event', (data) => {\n  //       if (data.post_id == postId && data.post_type == type) {\n  //         const dataToSend2 = {\n  //           user_id: user_id,\n  //           post_id: data.post_id,\n  //           post_type: data.post_type,\n  //         };\n  //         getComments(dataToSend2);\n  //       }\n  //     });\n  //   }\n  // }, [postId]);\n\n  \n\n  useEffect(() => {\n    let mounted = true\n    var sock = io(\"https://app.rymindr.com:8081\");\n    sock.on('comment-add:App\\\\Events\\\\CommentAdd', function (data){\n        if (mounted) {\n            console.log('Socket runningngngngngngngngngngngngngngngngngngngngngngng=',data.res);\n            console.log('postId====',postId);\n            if (data.res.post_id == postId && data.res.post_type == type) {\n              const dataToSend2 = {\n                user_id: user_id,\n                post_id: data.res.post_id,\n                post_type: data.res.post_type,\n              };\n              getComments(dataToSend2);\n            }\n        }\n    })\n\n    return function cleanup() {\n        mounted = false\n    }\n}, [postId])\n\n\n  useEffect(() => {\n    \n    if (postId && postUserId && type) {\n      const dataToSend = {\n        user_id: user_id,\n        post_id: postId,\n        post_type: type,\n      };\n\n      getComments(dataToSend);\n    }\n\n  }, [postId]);\n\n  \n  \n\n  const handleClick = (event, parentIndex, childIndex, commentId, commentUserId) => {\n    setAnchorEl(event.currentTarget);\n    var actions = [];\n    var loginUserId = parseInt(user_id);\n    var postOwnerUserId = parseInt(postUserId);\n    switch (parseInt(commentUserId)) {\n      case loginUserId:\n        actions = ['Edit...', 'Delete...', 'Turn off notifications...'];\n        break;\n      case postOwnerUserId:\n        actions = ['Delete...', 'Turn off notifications...'];\n        break;\n      default:\n        actions = ['Turn off notifications...'];\n        break;\n    }\n    setCommentOptions({\n      parentIndex,\n      childIndex,\n      commentId,\n      commentUserId,\n      actions,\n    });\n  };\n\n  const handleCommentAction = (action, commentDetails) => {\n    setAnchorEl(null);\n    switch (action) {\n      case 'Delete...':\n        if (commentDetails.parentIndex !== null)\n          comments[commentDetails.parentIndex]['replies'].splice(commentDetails.childIndex, 1);\n        else comments.splice(commentDetails.childIndex, 1);\n        const dataToSend = {\n          user_id: user_id,\n          id: commentDetails.commentId,\n        };\n        commentDelete(dataToSend);\n        break;\n      case 'Edit...':\n        setEditCommentId(commentDetails.commentId);\n        console.log('Edit action');\n        break;\n      default:\n        break;\n    }\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleAddComment = (event) => {\n    if (event == 'event') {\n      if (commentTxt !== '') {\n        const dataToSend = {\n          user_id: user_id,\n          post_id: props.postId,\n          post_type: props.type,\n          parent_comment_id: '',\n          content: commentTxt,\n          comment_type: 'text',\n        };\n\n        addComment(dataToSend);\n        setCommentTxt('');\n        addCommentRef.current.value = '';\n      }\n    } else if (event.key === 'Enter' && event.target.value !== '') {\n      const dataToSend = {\n        user_id: user_id,\n        post_id: props.postId,\n        post_type: props.type,\n        parent_comment_id: '',\n        content: event.target.value,\n        comment_type: 'text',\n      };\n\n      addComment(dataToSend);\n      event.target.value = '';\n    }\n  };\n\n  const handleDisableComment = (event) => {\n    if (event.keyCode === 27) {\n      console.log('Esc button pressed');\n      setEditCommentId(null);\n      setEditCommentText('');\n    }\n  };\n\n  const handleEditComment = (event, commentId, parentIndex, childIndex) => {\n    if (event == 'event') {\n      if (editCommentText !== '') {\n        if (parentIndex === null) comments[childIndex].comment = editCommentText;\n        else comments[parentIndex]['replies'][childIndex].reply = editCommentText;\n        const dataToSend = {\n          id: commentId,\n          user_id: user_id,\n          post_id: props.postId,\n          post_type: props.type,\n          parent_comment_id: '',\n          content: editCommentText,\n          comment_type: 'text',\n        };\n        addComment(dataToSend);\n        // event.target.value = \"\";\n        setEditCommentId(null);\n        setEditCommentText('');\n        editCommentRef.current.value = '';\n      } else if (editCommentText === '') {\n        setEditCommentText(\n          parentIndex === null ? comments[childIndex].comment : comments[parentIndex]['replies'][childIndex].reply\n        );\n      }\n    } else if (event.key === 'Enter' && event.target.value !== '') {\n      if (event.key === 'Enter' && event.target.value !== '') {\n        if (parentIndex === null) comments[childIndex].comment = event.target.value;\n        else comments[parentIndex]['replies'][childIndex].reply = event.target.value;\n        const dataToSend = {\n          id: commentId,\n          user_id: user_id,\n          post_id: props.postId,\n          post_type: props.type,\n          parent_comment_id: '',\n          content: event.target.value,\n          comment_type: 'text',\n        };\n        addComment(dataToSend);\n        event.target.value = '';\n        setEditCommentId(null);\n        setEditCommentText('');\n      } else if (editCommentText === '') {\n        setEditCommentText(\n          parentIndex === null ? comments[childIndex].comment : comments[parentIndex]['replies'][childIndex].reply\n        );\n      }\n    }\n  };\n\n  const handleAddReply = (event, commentId) => {\n    if (event == 'event') {\n      const dataToSend = {\n        user_id: user_id,\n        post_id: props.postId,\n        post_type: props.type,\n        parent_comment_id: commentId,\n        content: replyTxt,\n        comment_type: 'text',\n      };\n\n      addComment(dataToSend);\n      setReplyTxt('');\n      addReplyRef.current.value = '';\n    } else if (event.key === 'Enter' && event.target.value !== '') {\n      const dataToSend = {\n        user_id: user_id,\n        post_id: props.postId,\n        post_type: props.type,\n        parent_comment_id: commentId,\n        content: event.target.value,\n        comment_type: 'text',\n      };\n\n      addComment(dataToSend);\n      event.target.value = '';\n    }\n  };\n\n  const removeElementByValue = (array, element) => {\n    var index = array.indexOf(element);\n    if (index !== -1) array.splice(index, 1);\n    return array;\n  };\n\n  const handleLike = (postId, parentIndex, index, like_icon) => {\n    var temp = comments;\n    var userName = first_name + ' ' + last_name;\n    if (parentIndex !== null) {\n      if (like_icon === 'inactive') {\n        temp[parentIndex]['replies'][index].likes++;\n        temp[parentIndex]['replies'][index].like_icon = 'active';\n        temp[parentIndex]['replies'][index].likes_by_user_ids.push(user_id);\n        temp[parentIndex]['replies'][index].likes_by_user_names.push(userName);\n      } else {\n        temp[parentIndex]['replies'][index].likes--;\n        temp[parentIndex]['replies'][index].like_icon = 'inactive';\n        temp[parentIndex]['replies'][index].likes_by_user_ids = removeElementByValue(\n          temp[parentIndex]['replies'][index].likes_by_user_ids,\n          user_id\n        );\n        temp[parentIndex]['replies'][index].likes_by_user_names = removeElementByValue(\n          temp[parentIndex]['replies'][index].likes_by_user_names,\n          userName\n        );\n      }\n      console.log(temp[parentIndex]['replies'][index].likes_by_user_names);\n    } else {\n      if (like_icon === 'inactive') {\n        temp[index].likes++;\n        temp[index].like_icon = 'active';\n        temp[index].likes_by_user_ids.push(user_id);\n        temp[index].likes_by_user_names.push(userName);\n      } else {\n        temp[index].likes--;\n        temp[index].like_icon = 'inactive';\n        temp[index].likes_by_user_ids = removeElementByValue(temp[index].likes_by_user_ids, user_id);\n        temp[index].likes_by_user_names = removeElementByValue(temp[index].likes_by_user_names, userName);\n      }\n    }\n    setShowComments(new Set(temp));\n    console.log('showComments1234', showComments);\n    const dataToSend = {\n      user_id: user_id,\n      post_id: postId,\n      post_type: 'comment',\n      action: like_icon === 'inactive' ? 'add' : 'remove',\n    };\n    commentLike(dataToSend);\n  };\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  const [selectedIndex, setSelectedIndex] = React.useState('');\n\n  const handleCollapse = (index) => {\n    console.warn('selectedIndex === index', selectedIndex === index, selectedIndex, index);\n    if (selectedIndex === index) {\n      setSelectedIndex('');\n    } else {\n      setSelectedIndex(index);\n    }\n  };\n\n  return (\n    <ListItem className=\"commentsSection\" alignItems=\"flex-start\">\n      \n      <ListItemAvatar>\n        <AvatarStyled alt=\"\" variant=\"square\" src={require('../../assets/images/comment.svg')} />\n      </ListItemAvatar>\n      <ListItemText\n        primary={\n          <TypoTitleStyled>{comments.length === 1 ? '1 Comment' : comments.length + ' Comments'}</TypoTitleStyled>\n        }\n        secondary={\n          <>  \n            <Box display=\"flex\" className=\"commentSection\">\n              <AvatarComntStyled alt=\"\" src={profile_image} />\n              <TextFieldStyled\n                inputRef={addCommentRef}\n                placeholder=\"Add a comment...\"\n                onChange={(event) => setCommentTxt(event.target.value)}\n                onKeyPress={(event) => handleAddComment(event)}\n              />\n              <IconButton\n                aria-label=\"send\"\n                aria-controls=\"long-menu\"\n                aria-haspopup=\"true\"\n                disabled={commentTxt ? false : true}\n                onClick={(event) => handleAddComment('event')}\n              >\n                <Send />\n              </IconButton>\n            </Box>\n            {comments.map((comment, parentIndex) => (\n              <>\n                {comment.comment_id === editCommentId ? (\n                  <Box display=\"flex\" style={{ marginBottom: 20 }}>\n                    <AvatarComntStyled alt=\"\" src={comment.comment_user_profile_pic} />\n                    <Box width={1}>\n                      <EditCommentTextField\n                        inputRef={editCommentRef}\n                        defaultValue={comment.comment}\n                        onKeyDown={(event) => handleDisableComment(event)}\n                        onKeyPress={(event) => handleEditComment(event, comment.comment_id, null, parentIndex)}\n                        onChange={(event) => setEditCommentText(event.target.value)}\n                        // value={editcommentTxt}\n                      />\n                      <IconButton\n                        aria-label=\"send\"\n                        aria-controls=\"long-menu\"\n                        aria-haspopup=\"true\"\n                        onClick={() => handleEditComment('event', comment.comment_id, null, parentIndex)}\n                      >\n                        <Send />\n                      </IconButton>\n                      {/* <Box component=\"span\">Press Enter to save, Esc to cancel.</Box> */}\n                    </Box>\n                  </Box>\n                ) : (\n                  <Box display=\"flex\" justifyContent=\"space-between\" style={{ marginTop: 20 }}>\n                    <Box display=\"flex\">\n                      <AvatarComntStyled alt=\"\" src={comment.comment_user_profile_pic} />\n                      <Box>\n                        <TypoCmntName>\n                          \n\n                          {comment.comment_user_name}\n                          <Box component=\"span\"> {comment.comment_created_at}</Box>\n                        </TypoCmntName>\n                        <TypoCmntTxt>{comment.comment}</TypoCmntTxt>\n                        {comment.likes_by_user_ids.length ? (\n                          <Tooltip title={comment.likes_by_user_names.join(', ')} arrow placement=\"left\">\n                            <ButtonStyled\n                              startIcon={<ThumbUp color={comment.like_icon === 'active' ? 'primary' : 'default'} />}\n                              onClick={() => handleLike(comment.comment_id, null, parentIndex, comment.like_icon)}\n                            >\n                              {comment.likes}\n                            </ButtonStyled>\n                          </Tooltip>\n                        ) : (\n                          <ButtonStyled\n                            startIcon={<ThumbUp color={comment.like_icon === 'active' ? 'primary' : 'default'} />}\n                            onClick={() => handleLike(comment.comment_id, null, parentIndex, comment.like_icon)}\n                          >\n                            {comment.likes}\n                          </ButtonStyled>\n                        )}\n                        <ButtonStyled\n                          onClick={() => {\n                            handleCollapse(parentIndex);\n                          }}\n                          startIcon={<Message color=\"primary\" />}\n                        >\n                          {comment.replies.length\n                            ? comment.replies.length > 1\n                              ? comment.replies.length + ' Replies'\n                              : '1 Reply'\n                            : 'Reply'}\n                        </ButtonStyled>\n                      </Box>\n                    </Box>\n                    { !props.Hide && <Box style={{ position: 'relative' }}>\n                      <IconButton\n                        aria-label=\"more\"\n                        aria-controls=\"long-menu\"\n                        aria-haspopup=\"true\"\n                        onClick={(event) =>\n                          handleClick(event, null, parentIndex, comment.comment_id, comment.comment_user_id)\n                        }\n                      >\n                        <MoreVert />\n                      </IconButton>\n                    </Box> }\n                  </Box>\n                )}\n                <Collapse in={parentIndex === selectedIndex} timeout=\"auto\" unmountOnExit>\n                  <Box style={{ marginLeft: 183, marginTop: 20 }}>\n                    <Box display=\"flex\">\n                      <AvatarComntStyled alt=\"\" src={profile_image} />\n                      <TextFieldStyled\n                        inputRef={addReplyRef}\n                        placeholder=\"Add a reply...\"\n                        onKeyPress={(event) => handleAddReply(event, comment.comment_id)}\n                        onChange={(event) => setReplyTxt(event.target.value)}\n                        // value={replyTxt}\n                      />\n                      <IconButton\n                        aria-label=\"send\"\n                        aria-controls=\"long-menu\"\n                        aria-haspopup=\"true\"\n                        onClick={(event) => handleAddReply('event', comment.comment_id)}\n                      >\n                        <Send />\n                      </IconButton>\n                    </Box>\n                  </Box>\n\n                  {comment.replies.map((reply, index, { length }) => (\n                    <>\n                      {reply.reply_id === editCommentId ? (\n                        <Box display=\"flex\" style={{ marginLeft: 130, marginBottom: 20 }}>\n                          <AvatarComntStyled alt=\"\" src={profile_image} />\n                          <Box width={1} display=\"flex\">\n                            <EditCommentTextField\n                              inputRef={editCommentRef}\n                              defaultValue={reply.reply}\n                              onKeyDown={(event) => handleDisableComment(event)}\n                              onChange={(event) => setEditCommentText(event.target.value)}\n                              onKeyPress={(event) => handleEditComment(event, reply.reply_id, parentIndex, index)}\n                            />\n                            <IconButton\n                              aria-label=\"send\"\n                              aria-controls=\"long-menu\"\n                              aria-haspopup=\"true\"\n                              onClick={() => handleEditComment('event', reply.reply_id, parentIndex, index)}\n                            >\n                              <Send />\n                            </IconButton>\n                            {/* <Box component=\"span\">Press Enter to save, Esc to cancel.</Box> */}\n                          </Box>\n                        </Box>\n                      ) : (\n                        <Box\n                          display=\"flex\"\n                          justifyContent=\"space-between\"\n                          className=\"mt-20\"\n                          style={{ marginLeft: 183 }}\n                        >\n                          <Box display=\"flex\">\n                            <AvatarComntStyled alt=\"\" src={reply.reply_user_profile_pic} />\n                            <Box>\n                              <TypoCmntName>\n                                {reply.reply_user_name}\n                                <Box component=\"span\"> {reply.reply_created_at}</Box>\n                              </TypoCmntName>\n                              <TypoCmntTxt>{reply.reply}</TypoCmntTxt>\n                              {reply.likes_by_user_ids.length ? (\n                                <Tooltip title={reply.likes_by_user_names.join(', ')} arrow placement=\"left\">\n                                  <ButtonStyled\n                                    startIcon={<ThumbUp color={reply.like_icon === 'active' ? 'primary' : 'default'} />}\n                                    onClick={() => handleLike(reply.reply_id, parentIndex, index, reply.like_icon)}\n                                  >\n                                    {reply.likes}\n                                  </ButtonStyled>\n                                </Tooltip>\n                              ) : (\n                                <ButtonStyled\n                                  startIcon={<ThumbUp color={reply.like_icon === 'active' ? 'primary' : 'default'} />}\n                                  onClick={() => handleLike(reply.reply_id, parentIndex, index, reply.like_icon)}\n                                >\n                                  {reply.likes}\n                                </ButtonStyled>\n                              )}\n                            </Box>\n                          </Box>\n                          <Box style={{ position: 'relative' }}>\n                            <IconButton\n                              aria-label=\"more\"\n                              aria-controls=\"long-menu\"\n                              aria-haspopup=\"true\"\n                              onClick={(event) =>\n                                handleClick(event, parentIndex, index, reply.reply_id, reply.reply_user_id)\n                              }\n                            >\n                              <MoreVert />\n                            </IconButton>\n                          </Box>\n                        </Box>\n                      )}\n                    </>\n                  ))}\n                </Collapse>\n              </>\n            ))}\n\n            <Menu id=\"long-menu\" anchorEl={anchorEl} keepMounted open={open} onClose={handleClose}>\n              {commentOptions.actions.map((option) => (\n                <MenuItem\n                  key={option}\n                  selected={option === 'Pyxis'}\n                  onClick={() => handleCommentAction(option, commentOptions)}\n                >\n                  {option}\n                </MenuItem>\n              ))}\n            </Menu>\n          </>\n        }\n      />\n    </ListItem>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  \n  return {\n    // comments: state.comment.comments.reverse(),\n    comments: state.comment.comments\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getComments: (data) => dispatch(getComments(data)),\n    addComment: (data) => dispatch(addComment(data)),\n    commentLike: (data) => dispatch(commentLike(data)),\n    commentDelete: (data) => dispatch(commentDelete(data)),\n  };\n};\n\nComments.propTypes = {\n  getComments: PropTypes.func.isRequired,\n  comments: PropTypes.array.isRequired,\n  addComment: PropTypes.func.isRequired,\n  commentLike: PropTypes.func.isRequired,\n  commentDelete: PropTypes.func.isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withSnackbar(Comments));\n"]},"metadata":{},"sourceType":"module"}